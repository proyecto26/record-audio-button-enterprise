import{r as i,h as t,H as n,c as o,f as e,d as r,e as a,w as d}from"./p-fd83c6f5.js";import{g as s,c,a as u}from"./p-667e92e8.js";import{h as l,o as h,c as p}from"./p-5b51185b.js";import{i as f,g,a as m}from"./p-d6c8f0e6.js";import{d as v,r as b,f as w}from"./p-714cf0b2.js";import{c as x}from"./p-6857574d.js";import"./p-bf32a450.js";import"./p-52163e33.js";import"./p-eef8e423.js";import"./p-177ede88.js";import{createGesture as y}from"./p-dea53824.js";import"./p-ed3327fa.js";import"./p-f3a0c163.js";import"./p-930b4a3a.js";import"./p-e914fb32.js";const k=class{constructor(t){i(this,t)}componentDidLoad(){M(()=>{const i=u(window,"hybrid");c.getBoolean("_testing")||__sc_import_record_audio_button("./p-d9c1c1f6.js").then(i=>i.startTapClick(c)),c.getBoolean("statusTap",i)&&__sc_import_record_audio_button("./p-d2955096.js").then(i=>i.startStatusTap()),c.getBoolean("inputShims",R())&&__sc_import_record_audio_button("./p-8cac8e15.js").then(i=>i.startInputShims(c)),c.getBoolean("hardwareBackButton",i)&&__sc_import_record_audio_button("./p-f3a0c163.js").then(i=>i.startHardwareBackButton()),"undefined"!=typeof window&&__sc_import_record_audio_button("./p-1482a707.js").then(i=>i.startKeyboardAssist(window)),__sc_import_record_audio_button("./p-b62e8f49.js").then(i=>i.startFocusVisible())})}render(){const i=s(this);return t(n,{class:{[i]:!0,"ion-page":!0,"force-statusbar-padding":c.getBoolean("_forceStatusbarPadding")}})}get el(){return o(this)}},R=()=>u(window,"ios")&&u(window,"mobile"),M=i=>{"requestIdleCallback"in window?window.requestIdleCallback(i):setTimeout(i,32)};k.style="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}";const A={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},C=i=>void 0===i||""===i||!!window.matchMedia&&window.matchMedia(A[i]).matches,T=window,S=!!(T.CSS&&T.CSS.supports&&T.CSS.supports("--a: 0")),B=["","xs","sm","md","lg","xl"],z=class{constructor(t){i(this,t)}onResize(){e(this)}getColumns(i){let t;for(const n of B){const o=C(n),e=this[i+n.charAt(0).toUpperCase()+n.slice(1)];o&&void 0!==e&&(t=e)}return t}calculateSize(){const i=this.getColumns("size");if(!i||""===i)return;const t="auto"===i?"auto":S?`calc(calc(${i} / var(--ion-grid-columns, 12)) * 100%)`:i/12*100+"%";return{flex:"0 0 "+t,width:""+t,"max-width":""+t}}calculatePosition(i,t){const n=this.getColumns(i);if(n)return{[t]:S?`calc(calc(${n} / var(--ion-grid-columns, 12)) * 100%)`:n>0&&n<12?n/12*100+"%":"auto"}}calculateOffset(i){return this.calculatePosition("offset",i?"margin-right":"margin-left")}calculatePull(i){return this.calculatePosition("pull",i?"left":"right")}calculatePush(i){return this.calculatePosition("push",i?"right":"left")}render(){const i="rtl"===document.dir,o=s(this);return t(n,{class:{[o]:!0},style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(i)),this.calculatePull(i)),this.calculatePush(i)),this.calculateSize())},t("slot",null))}};z.style=":host{padding-left:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;width:100%;max-width:100%;min-height:1px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px))}}@media (min-width: 576px){:host{padding-left:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 768px){:host{padding-left:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 992px){:host{padding-left:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 1200px){:host{padding-left:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}}";const j=class{constructor(t){i(this,t),this.activated=!1,this.disabled=!1,this.routerDirection="forward",this.show=!1,this.translucent=!1,this.type="button",this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.ionFocus=r(this,"ionFocus",7),this.ionBlur=r(this,"ionBlur",7)}render(){const{el:i,disabled:o,color:e,href:r,activated:a,show:d,translucent:c,size:u}=this,f=l("ion-fab-list",i),g=s(this),m=void 0===r?"button":"a",v="button"===m?{type:this.type}:{download:this.download,href:r,rel:this.rel,target:this.target};return t(n,{"aria-disabled":o?"true":null,class:Object.assign(Object.assign({},p(e)),{[g]:!0,"fab-button-in-list":f,"fab-button-translucent-in-list":f&&c,"fab-button-close-active":a,"fab-button-show":d,"fab-button-disabled":o,"fab-button-translucent":c,"ion-activatable":!0,"ion-focusable":!0,["fab-button-"+u]:void 0!==u})},t(m,Object.assign({},v,{class:"button-native",disabled:o,onFocus:this.onFocus,onBlur:this.onBlur,onClick:i=>h(r,i,this.routerDirection)}),t("span",{class:"close-icon"},t("ion-icon",{name:"close",lazy:!1})),t("span",{class:"button-inner"},t("slot",null)),"md"===g&&t("ion-ripple-effect",null)))}get el(){return o(this)}};j.style={ios:':host{--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--background-hover:var(--ion-color-primary-contrast, #fff);--background-hover-opacity:.08;--transition:background-color, opacity 100ms linear;--ripple-color:currentColor;--border-radius:50%;--border-width:0;--border-style:none;--border-color:initial;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:56px;height:56px;font-size:14px;text-align:center;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transform:var(--transform);transform:var(--transform);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);background-clip:padding-box;color:var(--color);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:strict;cursor:pointer;overflow:hidden;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.button-native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}::slotted(ion-icon){line-height:1}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{left:0;right:0;top:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;z-index:1}:host(.fab-button-disabled){cursor:default;opacity:0.5;pointer-events:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-activated) .button-native{color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}::slotted(ion-icon){line-height:1}:host(.fab-button-small){margin-left:8px;margin-right:8px;margin-top:8px;margin-bottom:8px;width:40px;height:40px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.fab-button-small){margin-left:unset;margin-right:unset;-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px}}.close-icon{left:0;right:0;top:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;-webkit-transform:scale(0.4) rotateZ(-45deg);transform:scale(0.4) rotateZ(-45deg);-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;opacity:0;z-index:1}:host(.fab-button-close-active) .close-icon{-webkit-transform:scale(1) rotateZ(0deg);transform:scale(1) rotateZ(0deg);opacity:1}:host(.fab-button-close-active) .button-inner{-webkit-transform:scale(0.4) rotateZ(45deg);transform:scale(0.4) rotateZ(45deg);opacity:0}ion-ripple-effect{color:var(--ripple-color)}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent) .button-native{-webkit-backdrop-filter:var(--backdrop-filter);backdrop-filter:var(--backdrop-filter)}}:host(.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{--background:var(--ion-color-primary, #3880ff);--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1;--color:var(--ion-color-primary-contrast, #fff);--box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);--transition:0.2s transform cubic-bezier(0.25, 1.11, 0.78, 1.59)}:host(.ion-activated){--box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);--transform:scale(1.1);--transition:0.2s transform ease-out}::slotted(ion-icon),.close-icon{font-size:28px}:host(.fab-button-in-list){--background:var(--ion-color-light, #f4f5f8);--background-activated:var(--ion-color-light-shade, #d7d8da);--background-focused:var(--background-activated);--background-hover:var(--ion-color-light-tint, #f5f6f9);--color:var(--ion-color-light-contrast, #000);--color-activated:var(--ion-color-light-contrast, #000);--color-focused:var(--color-activated);--transition:transform 200ms ease 10ms, opacity 200ms ease 10ms}:host(.fab-button-in-list) ::slotted(ion-icon){font-size:18px}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}:host(.ion-color.ion-focused) .button-native,:host(.ion-color.ion-activated) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .button-native::after,:host(.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-contrast)}:host(.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent){--background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.9);--background-hover:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.8);--background-focused:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.82);--backdrop-filter:saturate(180%) blur(20px)}:host(.fab-button-translucent-in-list){--background:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.9);--background-hover:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.8);--background-focused:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.82)}}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){@media (any-hover: hover){:host(.fab-button-translucent.ion-color:hover) .button-native{background:rgba(var(--ion-color-base-rgb), 0.8)}}:host(.ion-color.fab-button-translucent) .button-native{background:rgba(var(--ion-color-base-rgb), 0.9)}:host(.ion-color.ion-focused.fab-button-translucent) .button-native,:host(.ion-color.ion-activated.fab-button-translucent) .button-native{background:var(--ion-color-base)}}'};const L=class{constructor(t){i(this,t),this.translucent=!1}render(){const i=s(this),o=this.translucent;return t(n,{role:"contentinfo",class:{[i]:!0,["footer-"+i]:!0,"footer-translucent":o,["footer-translucent-"+i]:o}},"ios"===i&&o&&t("div",{class:"footer-background"}),t("slot",null))}};L.style={ios:"ion-footer{display:block;position:relative;-ms-flex-order:1;order:1;width:100%;z-index:10}ion-footer ion-toolbar:last-of-type{padding-bottom:var(--ion-safe-area-bottom, 0)}.footer-ios ion-toolbar:first-of-type{--border-width:0.55px 0 0}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.footer-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.footer-translucent-ios ion-toolbar{--opacity:.8}}.footer-ios.ion-no-border ion-toolbar:first-of-type{--border-width:0}"};const F=class{constructor(t){i(this,t),this.fixed=!1}render(){const i=s(this);return t(n,{class:{[i]:!0,"grid-fixed":this.fixed}},t("slot",null))}};F.style=":host{padding-left:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));margin-left:auto;margin-right:auto;display:block;-ms-flex:1;flex:1}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px))}}@media (min-width: 576px){:host{padding-left:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}}@media (min-width: 768px){:host{padding-left:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}}@media (min-width: 992px){:host{padding-left:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}}@media (min-width: 1200px){:host{padding-left:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}";const _=i=>{if(1===i.nodeType){if("script"===i.nodeName.toLowerCase())return!1;for(let t=0;t<i.attributes.length;t++){const n=i.attributes[t].value;if(f(n)&&0===n.toLowerCase().indexOf("on"))return!1}for(let t=0;t<i.childNodes.length;t++)if(!_(i.childNodes[t]))return!1}return!0},D=new Map,I=new Map,U=class{constructor(t){i(this,t),this.isVisible=!1,this.mode=O(),this.lazy=!1}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(i,t,n){if(this.lazy&&"undefined"!=typeof window&&window.IntersectionObserver){const o=this.io=new window.IntersectionObserver(i=>{i[0].isIntersecting&&(o.disconnect(),this.io=void 0,n())},{rootMargin:t});o.observe(i)}else n()}loadIcon(){if(this.isVisible){const i=g(this);i&&(D.has(i)?this.svgContent=D.get(i):(i=>{let t=I.get(i);if(!t){if("undefined"==typeof fetch)return D.set(i,""),Promise.resolve();t=fetch(i).then(t=>{if(t.ok)return t.text().then(t=>{D.set(i,(i=>{if(i&&"undefined"!=typeof document){const t=document.createElement("div");t.innerHTML=i;for(let i=t.childNodes.length-1;i>=0;i--)"svg"!==t.childNodes[i].nodeName.toLowerCase()&&t.removeChild(t.childNodes[i]);const n=t.firstElementChild;if(n&&"svg"===n.nodeName.toLowerCase()){const i=n.getAttribute("class")||"";if(n.setAttribute("class",(i+" s-ion-icon").trim()),_(n))return t.innerHTML}}return""})(t))});D.set(i,"")}),I.set(i,t)}return t})(i).then(()=>this.svgContent=D.get(i)))}if(!this.ariaLabel){const i=m(this.name,this.icon,this.mode,this.ios,this.md);i&&(this.ariaLabel=i.replace(/\-/g," "))}}render(){const i=this.mode||"md",o=this.flipRtl||this.ariaLabel&&(this.ariaLabel.indexOf("arrow")>-1||this.ariaLabel.indexOf("chevron")>-1)&&!1!==this.flipRtl;return t(n,{role:"img",class:Object.assign(Object.assign({[i]:!0},P(this.color)),{["icon-"+this.size]:!!this.size,"flip-rtl":!!o&&"rtl"===this.el.ownerDocument.dir})},t("div",this.svgContent?{class:"icon-inner",innerHTML:this.svgContent}:{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return o(this)}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"]}}},O=()=>"undefined"!=typeof document&&document.documentElement.getAttribute("mode")||"md",P=i=>i?{"ion-color":!0,["ion-color-"+i]:!0}:null;U.style=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}";const E=class{constructor(t){i(this,t),this.type="bounded"}async addRipple(i,t){return new Promise(n=>{a(()=>{const o=this.el.getBoundingClientRect(),e=o.width,r=o.height,a=Math.sqrt(e*e+r*r),s=Math.max(r,e),c=this.unbounded?s:a+q,u=Math.floor(s*H),l=c/u;let h=i-o.left,p=t-o.top;this.unbounded&&(h=.5*e,p=.5*r);const f=h-.5*u,g=p-.5*u,m=.5*e-h,v=.5*r-p;d(()=>{const i=document.createElement("div");i.classList.add("ripple-effect");const t=i.style;t.top=g+"px",t.left=f+"px",t.width=t.height=u+"px",t.setProperty("--final-scale",""+l),t.setProperty("--translate-end",`${m}px, ${v}px`),(this.el.shadowRoot||this.el).appendChild(i),setTimeout(()=>{n(()=>{W(i)})},325)})})})}get unbounded(){return"unbounded"===this.type}render(){const i=s(this);return t(n,{role:"presentation",class:{[i]:!0,unbounded:this.unbounded}})}get el(){return o(this)}},W=i=>{i.classList.add("fade-out"),setTimeout(()=>{i.remove()},200)},q=10,H=.5;E.style=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}";const N=class{constructor(t){i(this,t)}render(){return t(n,{class:s(this)},t("slot",null))}};N.style=":host{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}";const $=class{constructor(t){i(this,t),this.inputId="ion-input-"+G++,this.didBlurAfterEdit=!1,this.hasFocus=!1,this.autocapitalize="none",this.autofocus=!1,this.clearOnEdit=!1,this.debounce=0,this.disabled=!1,this.name=this.inputId,this.readonly=!1,this.required=!1,this.spellcheck=!1,this.autoGrow=!1,this.value="",this.onInput=i=>{this.nativeInput&&(this.value=this.nativeInput.value),this.emitStyle(),this.ionInput.emit(i)},this.onFocus=()=>{this.hasFocus=!0,this.focusChange(),this.ionFocus.emit()},this.onBlur=()=>{this.hasFocus=!1,this.focusChange(),this.ionBlur.emit()},this.onKeyDown=()=>{this.checkClearOnEdit()},this.ionChange=r(this,"ionChange",7),this.ionInput=r(this,"ionInput",7),this.ionStyle=r(this,"ionStyle",7),this.ionBlur=r(this,"ionBlur",7),this.ionFocus=r(this,"ionFocus",7)}debounceChanged(){this.ionChange=v(this.ionChange,this.debounce)}disabledChanged(){this.emitStyle()}valueChanged(){const i=this.nativeInput,t=this.getValue();i&&i.value!==t&&(i.value=t),this.runAutoGrow(),this.emitStyle(),this.ionChange.emit({value:t})}connectedCallback(){this.emitStyle(),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el}))}componentDidLoad(){b(()=>this.runAutoGrow())}runAutoGrow(){const i=this.nativeInput;i&&this.autoGrow&&a(()=>{i.style.height="auto",i.style.height=i.scrollHeight+"px",this.textareaWrapper&&(this.textareaWrapper.style.height=i.scrollHeight+"px")})}async setFocus(){this.nativeInput&&this.nativeInput.focus()}getInputElement(){return Promise.resolve(this.nativeInput)}emitStyle(){this.ionStyle.emit({interactive:!0,textarea:!0,input:!0,"interactive-disabled":this.disabled,"has-placeholder":null!=this.placeholder,"has-value":this.hasValue(),"has-focus":this.hasFocus})}checkClearOnEdit(){this.clearOnEdit&&(this.didBlurAfterEdit&&this.hasValue()&&(this.value=""),this.didBlurAfterEdit=!1)}focusChange(){this.clearOnEdit&&!this.hasFocus&&this.hasValue()&&(this.didBlurAfterEdit=!0),this.emitStyle()}hasValue(){return""!==this.getValue()}getValue(){return this.value||""}render(){const i=s(this),o=this.getValue(),e=this.inputId+"-lbl",r=w(this.el);return r&&(r.id=e),t(n,{"aria-disabled":this.disabled?"true":null,class:Object.assign(Object.assign({},p(this.color)),{[i]:!0})},t("div",{class:"textarea-wrapper",ref:i=>this.textareaWrapper=i},t("textarea",{class:"native-textarea",ref:i=>this.nativeInput=i,autoCapitalize:this.autocapitalize,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,disabled:this.disabled,maxLength:this.maxlength,minLength:this.minlength,name:this.name,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellCheck:this.spellcheck,cols:this.cols,rows:this.rows,wrap:this.wrap,onInput:this.onInput,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeyDown},o)))}get el(){return o(this)}static get watchers(){return{debounce:["debounceChanged"],disabled:["disabledChanged"],value:["valueChanged"]}}};let G=0;$.style={ios:".sc-ion-textarea-ios-h{--background:initial;--color:initial;--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:.5;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--border-radius:0;display:block;position:relative;-ms-flex:1;flex:1;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);white-space:pre-wrap;z-index:2}.ion-color.sc-ion-textarea-ios-h{background:initial}.ion-color.sc-ion-textarea-ios-h{color:var(--ion-color-base)}ion-item.sc-ion-textarea-ios-h,ion-item .sc-ion-textarea-ios-h{-ms-flex-item-align:baseline;align-self:baseline}ion-item.sc-ion-textarea-ios-h:not(.item-label),ion-item:not(.item-label) .sc-ion-textarea-ios-h{--padding-start:0}.native-textarea.sc-ion-textarea-ios{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;resize:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.native-textarea.sc-ion-textarea-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.native-textarea.sc-ion-textarea-ios::-webkit-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::-moz-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios:-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea[disabled].sc-ion-textarea-ios{opacity:0.4}.cloned-input.sc-ion-textarea-ios{left:0;top:0;position:absolute;pointer-events:none}[dir=rtl].sc-ion-textarea-ios .cloned-input.sc-ion-textarea-ios,[dir=rtl].sc-ion-textarea-ios-h .cloned-input.sc-ion-textarea-ios,[dir=rtl] .sc-ion-textarea-ios-h .cloned-input.sc-ion-textarea-ios{left:unset;right:unset;right:0}.sc-ion-textarea-ios-h{--padding-top:10px;--padding-end:10px;--padding-bottom:10px;--padding-start:0;font-size:inherit}.item-label-stacked.sc-ion-textarea-ios-h,.item-label-stacked .sc-ion-textarea-ios-h,.item-label-floating.sc-ion-textarea-ios-h,.item-label-floating .sc-ion-textarea-ios-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0px}"};var V,K="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Z=(function(i){
/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */
function t(i,e){if(!i)throw"First parameter is required.";e=new n(i,e=e||{type:"video"});var r=this;function a(t){t&&(e.initCallback=function(){t(),t=e.initCallback=null});var n=new o(i,e);(p=new n(i,e)).record(),h("recording"),e.disableLogs||console.log("Initialized recorderType:",p.constructor.name,"for output-type:",e.type)}function d(i){if(i=i||function(){},p){if("paused"===r.state)return r.resumeRecording(),void setTimeout((function(){d(i)}),1);"recording"===r.state||e.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',r.state),e.disableLogs||console.log("Stopped recording "+e.type+" stream."),"gif"!==e.type?p.stop(t):(p.stop(),t()),h("stopped")}else g();function t(t){if(p){Object.keys(p).forEach((function(i){"function"!=typeof p[i]&&(r[i]=p[i])}));var n=p.blob;if(!n){if(!t)throw"Recording failed.";p.blob=n=t}if(n&&!e.disableLogs&&console.log(n.type,"->",v(n.size)),i){var o;try{o=u.createObjectURL(n)}catch(a){}"function"==typeof i.call?i.call(r,o):i(o)}e.autoWriteToDisk&&c((function(i){var t={};t[e.type+"Blob"]=i,B.Store(t)}))}else"function"==typeof i.call?i.call(r,""):i("")}}function s(i){postMessage((new FileReaderSync).readAsDataURL(i))}function c(i,t){if(!i)throw"Pass a callback function over getDataURL.";var n=t?t.blob:(p||{}).blob;if(!n)return e.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout((function(){c(i,t)}),1e3);if("undefined"==typeof Worker||navigator.mozGetUserMedia){var o=new FileReader;o.readAsDataURL(n),o.onload=function(t){i(t.target.result)}}else{var r=function(i){try{var t=u.createObjectURL(new Blob([i.toString(),"this.onmessage =  function (eee) {"+i.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(t);return u.revokeObjectURL(t),n}catch(o){}}(s);r.onmessage=function(t){i(t.data)},r.postMessage(n)}}function l(i){i=i||0,"paused"!==r.state?"stopped"!==r.state&&(i>=r.recordingDuration?d(r.onRecordingStopped):(i+=1e3,setTimeout((function(){l(i)}),1e3))):setTimeout((function(){l(i)}),1e3)}function h(i){r&&(r.state=i,"function"==typeof r.onStateChanged.call?r.onStateChanged.call(r,i):r.onStateChanged(i))}var p,f='It seems that recorder is destroyed or "startRecording" is not invoked for '+e.type+" recorder.";function g(){!0!==e.disableLogs&&console.warn(f)}var m={startRecording:function(t){return e.disableLogs||console.log("RecordRTC version: ",r.version),t&&(e=new n(i,t)),e.disableLogs||console.log("started recording "+e.type+" stream."),p?(p.clearRecordedData(),p.record(),h("recording"),r.recordingDuration&&l(),r):(a((function(){r.recordingDuration&&l()})),r)},stopRecording:d,pauseRecording:function(){p?"recording"===r.state?(h("paused"),p.pause(),e.disableLogs||console.log("Paused recording.")):e.disableLogs||console.warn("Unable to pause the recording. Recording state: ",r.state):g()},resumeRecording:function(){p?"paused"===r.state?(h("recording"),p.resume(),e.disableLogs||console.log("Resumed recording.")):e.disableLogs||console.warn("Unable to resume the recording. Recording state: ",r.state):g()},initRecorder:a,setRecordingDuration:function(i,t){if(void 0===i)throw"recordingDuration is required.";if("number"!=typeof i)throw"recordingDuration must be a number.";return r.recordingDuration=i,r.onRecordingStopped=t||function(){},{onRecordingStopped:function(i){r.onRecordingStopped=i}}},clearRecordedData:function(){p?(p.clearRecordedData(),e.disableLogs||console.log("Cleared old recorded data.")):g()},getBlob:function(){if(p)return p.blob;g()},getDataURL:c,toURL:function(){if(p)return u.createObjectURL(p.blob);g()},getInternalRecorder:function(){return p},save:function(i){p?b(p.blob,i):g()},getFromDisk:function(i){p?t.getFromDisk(e.type,i):g()},setAdvertisementArray:function(i){e.advertisement=[];for(var t=i.length,n=0;n<t;n++)e.advertisement.push({duration:n,image:i[n]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==r.state||e.disableLogs||console.warn("Stop an active recorder."),p&&"function"==typeof p.clearRecordedData&&p.clearRecordedData(),p=null,h("inactive"),r.blob=null},onStateChanged:function(i){e.disableLogs||console.log("Recorder state changed:",i)},state:"inactive",getState:function(){return r.state},destroy:function(){var i=e.disableLogs;e={disableLogs:!0},r.reset(),h("destroyed"),m=r=null,k.AudioContextConstructor&&(k.AudioContextConstructor.close(),k.AudioContextConstructor=null),e.disableLogs=i,e.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.5.9"};if(!this)return r=m,m;for(var w in m)this[w]=m[w];return r=this,m}
/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */
function n(i,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===T||t.recorderType===C||void 0!==F&&t.recorderType===F?t.type="video":t.recorderType===z?t.type="gif":t.recorderType===A?t.type="audio":t.recorderType===M&&(x(i,"audio").length&&x(i,"video").length||!x(i,"audio").length&&x(i,"video").length?t.type="video":x(i,"audio").length&&!x(i,"video").length&&(t.type="audio"))),void 0!==M&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0])),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}
/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function o(i,t){var n;return(f||l||h)&&(n=A),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!f&&(n=M),"video"===t.type&&(f||h)&&(n=T,void 0!==F&&"undefined"!=typeof ReadableStream&&(n=F)),"gif"===t.type&&(n=z),"canvas"===t.type&&(n=C),R()&&n!==C&&n!==z&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(x(i,"video").length||x(i,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(n=M):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(n=M)),i instanceof Array&&i.length&&(n=L),t.recorderType&&(n=t.recorderType),!t.disableLogs&&n&&n.name&&console.log("Using recorderType:",n.name||n.constructor.name),!n&&g&&(n=M),n}
/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function e(i){this.addStream=function(t){t&&(i=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var n,o=this.mediaType,e=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof o.audio&&R()&&!x(i,"audio").length&&(o.audio=!1),"function"!=typeof o.video&&R()&&!x(i,"video").length&&(o.video=!1),"function"!=typeof o.gif&&R()&&!x(i,"video").length&&(o.gif=!1),!o.audio&&!o.video&&!o.gif)throw"MediaStream must have either audio or video tracks.";if(o.audio&&(n=null,"function"==typeof o.audio&&(n=o.audio),this.audioRecorder=new t(i,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:n,mimeType:e.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),o.video||this.audioRecorder.startRecording()),o.video){n=null,"function"==typeof o.video&&(n=o.video);var r=i;if(R()&&o.audio&&"function"==typeof o.audio){var a=x(i,"video")[0];p?((r=new m).addTrack(a),n&&n===T&&(n=M)):(r=new m).addTrack(a)}this.videoRecorder=new t(r,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:n,mimeType:e.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),o.audio||this.videoRecorder.startRecording()}if(o.audio&&o.video){var d=this,s=!0===R();(o.audio instanceof A&&o.video||!0!==o.audio&&!0!==o.video&&o.audio!==o.video)&&(s=!1),!0===s?(d.audioRecorder=null,d.videoRecorder.startRecording()):d.videoRecorder.initRecorder((function(){d.audioRecorder.initRecorder((function(){d.videoRecorder.startRecording(),d.audioRecorder.startRecording()}))}))}o.gif&&(n=null,"function"==typeof o.gif&&(n=o.gif),this.gifRecorder=new t(i,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:n,mimeType:e.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(i){i=i||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){i(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){i(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){i(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(i){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),i&&i(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(i){function t(i,t){if("undefined"!=typeof Worker){var n=function(i){var t,n=u.createObjectURL(new Blob([i.toString(),"this.onmessage =  function (eee) {"+i.name+"(eee.data);}"],{type:"application/javascript"})),o=new Worker(n);if(void 0!==u)t=u;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(n),o}((function(i){postMessage((new FileReaderSync).readAsDataURL(i))}));n.onmessage=function(i){t(i.data)},n.postMessage(i)}else{var o=new FileReader;o.readAsDataURL(i),o.onload=function(i){t(i.target.result)}}}this.getBlob((function(n){n.audio&&n.video?t(n.audio,(function(o){t(n.video,(function(t){i({audio:o,video:t})}))})):n.audio?t(n.audio,(function(t){i({audio:t})})):n.video&&t(n.video,(function(t){i({video:t})}))}))},this.writeToDisk=function(){t.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(i){(i=i||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof i.audio?i.audio:""),i.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof i.video?i.video:""),i.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof i.gif?i.gif:"")}}var r;t.version="5.5.9",i.exports=t,t.getFromDisk=function(i,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===i?"blobs":i+" blob ")+" from disk!"),B.Fetch((function(n,o){"all"!==i&&o===i+"Blob"&&t&&t(n),"all"===i&&t&&t(n,o.replace("Blob",""))}))},t.writeToDisk=function(i){console.log("Writing recorded blob(s) to disk!"),(i=i||{}).audio&&i.video&&i.gif?i.audio.getDataURL((function(t){i.video.getDataURL((function(n){i.gif.getDataURL((function(i){B.Store({audioBlob:t,videoBlob:n,gifBlob:i})}))}))})):i.audio&&i.video?i.audio.getDataURL((function(t){i.video.getDataURL((function(i){B.Store({audioBlob:t,videoBlob:i})}))})):i.audio&&i.gif?i.audio.getDataURL((function(t){i.gif.getDataURL((function(i){B.Store({audioBlob:t,gifBlob:i})}))})):i.video&&i.gif?i.video.getDataURL((function(t){i.gif.getDataURL((function(i){B.Store({videoBlob:t,gifBlob:i})}))})):i.audio?i.audio.getDataURL((function(i){B.Store({audioBlob:i})})):i.video?i.video.getDataURL((function(i){B.Store({videoBlob:i})})):i.gif&&i.gif.getDataURL((function(i){B.Store({gifBlob:i})}))},e.getFromDisk=t.getFromDisk,e.writeToDisk=t.writeToDisk,void 0!==t&&(t.MRecordRTC=e),(r=void 0!==K?K:null)&&"undefined"==typeof window&&void 0!==K&&(K.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},K.console||(K.console={}),void 0!==K.console.log&&void 0!==K.console.error||(K.console.error=K.console.log=K.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(r.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var i={getContext:function(){return i},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return i},r.HTMLVideoElement=function(){}),"undefined"==typeof location&&(r.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(r.screen={width:0,height:0}),void 0===u&&(r.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),r.window=K);var a=window.requestAnimationFrame;if(void 0===a)if("undefined"!=typeof webkitRequestAnimationFrame)a=webkitRequestAnimationFrame;else if("undefined"!=typeof mozRequestAnimationFrame)a=mozRequestAnimationFrame;else if("undefined"!=typeof msRequestAnimationFrame)a=msRequestAnimationFrame;else if(void 0===a){var d=0;a=function(i){var t=(new Date).getTime(),n=Math.max(0,16-(t-d)),o=setTimeout((function(){i(t+n)}),n);return d=t+n,o}}var s=window.cancelAnimationFrame;void 0===s&&("undefined"!=typeof webkitCancelAnimationFrame?s=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?s=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?s=msCancelAnimationFrame:void 0===s&&(s=function(i){clearTimeout(i)}));var c=window.AudioContext;void 0===c&&("undefined"!=typeof webkitAudioContext&&(c=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(c=mozAudioContext));var u=window.URL;void 0===u&&"undefined"!=typeof webkitURL&&(u=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var l=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),h=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),p=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),f=!h&&!l&&!!navigator.webkitGetUserMedia||w()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),g=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);g&&!f&&-1!==navigator.userAgent.indexOf("CriOS")&&(g=!1,f=!0);var m=window.MediaStream;function v(i){if(0===i)return"0 Bytes";var t=parseInt(Math.floor(Math.log(i)/Math.log(1e3)),10);return(i/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function b(i,t){if(!i)throw"Blob object is required.";if(!i.type)try{i.type="video/webm"}catch(a){}var n=(i.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var o=t.split(".");t=o[0],n=o[1]}var e=(t||Math.round(9999999999*Math.random())+888888888)+"."+n;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(i,e);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(i,e);var r=document.createElement("a");r.href=u.createObjectURL(i),r.download=e,r.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(r),"function"==typeof r.click?r.click():(r.target="_blank",r.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),u.revokeObjectURL(r.href)}function w(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}function x(i,t){return i&&i.getTracks?i.getTracks().filter((function(i){return i.kind===(t||"audio")})):[]}function y(i,t){"srcObject"in t?t.srcObject=i:"mozSrcObject"in t?t.mozSrcObject=i:t.srcObject=i}void 0===m&&"undefined"!=typeof webkitMediaStream&&(m=webkitMediaStream),void 0!==m&&void 0===m.prototype.stop&&(m.prototype.stop=function(){this.getTracks().forEach((function(i){i.stop()}))}),void 0!==t&&(t.invokeSaveAsDialog=b,t.getTracks=x,t.getSeekableBlob=function(i,t){if("undefined"==typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var n=new EBML.Reader,o=new EBML.Decoder,e=EBML.tools,r=new FileReader;r.onload=function(){o.decode(this.result).forEach((function(i){n.read(i)})),n.stop();var i=e.makeMetadataSeekable(n.metadatas,n.duration,n.cues),r=this.result.slice(n.metadataSize),a=new Blob([i,r],{type:"video/webm"});t(a)},r.readAsArrayBuffer(i)},t.bytesToSize=v,t.isElectron=w);
/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */
var k={};function R(){if(p||g||l)return!0;var i,t,n=navigator.userAgent,o=""+parseFloat(navigator.appVersion),e=parseInt(navigator.appVersion,10);return(f||h)&&(i=n.indexOf("Chrome"),o=n.substring(i+7)),-1!==(t=o.indexOf(";"))&&(o=o.substring(0,t)),-1!==(t=o.indexOf(" "))&&(o=o.substring(0,t)),e=parseInt(""+o,10),isNaN(e)&&(o=""+parseFloat(navigator.appVersion),e=parseInt(navigator.appVersion,10)),e>=49}
/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function M(i,t){var n,o=this;if(void 0===i)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";"audio"===(t=t||{mimeType:"video/webm"}).type&&(x(i,"video").length&&x(i,"audio").length&&(navigator.mozGetUserMedia?(n=new m).addTrack(x(i,"audio")[0]):n=new m(x(i,"audio")),i=n),t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=f?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg"));var e,r=[];function a(){o.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(o.timestamps[o.timestamps.length-1],o.timestamps)}function d(i){return e&&e.mimeType?e.mimeType:i.mimeType||"video/webm"}function s(){r=[],e=null,o.timestamps=[]}this.getArrayOfBlobs=function(){return r},this.record=function(){o.blob=null,o.clearRecordedData(),o.timestamps=[],c=[],r=[];var n=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",n),e&&(e=null),f&&!R()&&(n="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&n.mimeType&&(MediaRecorder.isTypeSupported(n.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType),n.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{e=new MediaRecorder(i,n),t.mimeType=n.mimeType}catch(s){e=new MediaRecorder(i)}n.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in e&&!1===e.canRecordMimeType(n.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType)),e.ondataavailable=function(i){if(i.data&&c.push("ondataavailable: "+v(i.data.size)),"number"!=typeof t.timeSlice)!i.data||!i.data.size||i.data.size<100||o.blob?o.recordingCallback&&(o.recordingCallback(new Blob([],{type:d(n)})),o.recordingCallback=null):(o.blob=t.getNativeBlob?i.data:new Blob([i.data],{type:d(n)}),o.recordingCallback&&(o.recordingCallback(o.blob),o.recordingCallback=null));else if(i.data&&i.data.size&&i.data.size>100&&(r.push(i.data),a(),"function"==typeof t.ondataavailable)){var e=t.getNativeBlob?i.data:new Blob([i.data],{type:d(n)});t.ondataavailable(e)}},e.onstart=function(){c.push("started")},e.onpause=function(){c.push("paused")},e.onresume=function(){c.push("resumed")},e.onstop=function(){c.push("stopped")},e.onerror=function(i){i&&(i.name||(i.name="UnknownError"),c.push("error: "+i),t.disableLogs||(-1!==i.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",i):-1!==i.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",n.mimeType,") is not supported.",i):-1!==i.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",i):"OutOfMemory"===i.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",i):"IllegalStreamModification"===i.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",i):"OtherRecordingError"===i.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",i):"GenericError"===i.name?console.error("The UA cannot provide the codec or recording option that has been requested.",i):console.error("MediaRecorder Error",i)),function(){if(!o.manuallyStopped&&e&&"inactive"===e.state)return delete t.timeslice,void e.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==e.state&&"stopped"!==e.state&&e.stop())},"number"==typeof t.timeSlice?(a(),e.start(t.timeSlice)):e.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(i){i=i||function(){},o.manuallyStopped=!0,e&&(this.recordingCallback=i,"recording"===e.state&&e.stop(),"number"==typeof t.timeSlice&&setTimeout((function(){o.blob=new Blob(r,{type:d(t)}),o.recordingCallback(o.blob)}),100))},this.pause=function(){e&&"recording"===e.state&&e.pause()},this.resume=function(){e&&"paused"===e.state&&e.resume()},this.clearRecordedData=function(){e&&"recording"===e.state&&o.stop(s),s()},this.getInternalRecorder=function(){return e},this.blob=null,this.getState=function(){return e&&e.state||"inactive"};var c=[];this.getAllStates=function(){return c},void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1),o=this,function n(){if(e&&!1!==t.checkForInactiveTracks)return!1===function(){if("active"in i){if(!i.active)return!1}else if("ended"in i&&i.ended)return!1;return!0}()?(t.disableLogs||console.log("MediaStream seems stopped."),void o.stop()):void setTimeout(n,1e3)}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}
/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */
function A(i,n){if(!x(i,"audio").length)throw"Your stream has no audio tracks.";var o,e=this,r=[],a=[],d=!1,s=0,c=2,l=(n=n||{}).desiredSampRate;function h(){if(!1===n.checkForInactiveTracks)return!0;if("active"in i){if(!i.active)return!1}else if("ended"in i&&i.ended)return!1;return!0}function p(i,t){function n(i,t){var n,o=i.numberOfAudioChannels,e=i.leftBuffers.slice(0),r=i.rightBuffers.slice(0),a=i.sampleRate,d=i.internalInterleavedLength,s=i.desiredSampRate;function c(i,t,n){var o=Math.round(i.length*(t/n)),e=[],r=Number((i.length-1)/(o-1));e[0]=i[0];for(var a=1;a<o-1;a++){var d=a*r,s=Number(Math.floor(d)).toFixed(),c=Number(Math.ceil(d)).toFixed();e[a]=u(i[s],i[c],d-s)}return e[o-1]=i[i.length-1],e}function u(i,t,n){return i+(t-i)*n}function l(i,t){for(var n=new Float64Array(t),o=0,e=i.length,r=0;r<e;r++){var a=i[r];n.set(a,o),o+=a.length}return n}function h(i,t,n){for(var o=n.length,e=0;e<o;e++)i.setUint8(t+e,n.charCodeAt(e))}2===o&&(e=l(e,d),r=l(r,d),s&&(e=c(e,s,a),r=c(r,s,a))),1===o&&(e=l(e,d),s&&(e=c(e,s,a))),s&&(a=s),2===o&&(n=function(i,t){for(var n=i.length+t.length,o=new Float64Array(n),e=0,r=0;r<n;)o[r++]=i[e],o[r++]=t[e],e++;return o}(e,r)),1===o&&(n=e);var p=n.length,f=new ArrayBuffer(44+2*p),g=new DataView(f);h(g,0,"RIFF"),g.setUint32(4,36+2*p,!0),h(g,8,"WAVE"),h(g,12,"fmt "),g.setUint32(16,16,!0),g.setUint16(20,1,!0),g.setUint16(22,o,!0),g.setUint32(24,a,!0),g.setUint32(28,2*a,!0),g.setUint16(32,2*o,!0),g.setUint16(34,16,!0),h(g,36,"data"),g.setUint32(40,2*p,!0);for(var m=p,v=44,b=0;b<m;b++)g.setInt16(v,32767*n[b],!0),v+=2;if(t)return t({buffer:f,view:g});postMessage({buffer:f,view:g})}if(i.noWorker)n(i,(function(i){t(i.buffer,i.view)}));else{var o,e,r,a=(o=n,e=u.createObjectURL(new Blob([o.toString(),";this.onmessage =  function (eee) {"+o.name+"(eee.data);}"],{type:"application/javascript"})),(r=new Worker(e)).workerURL=e,r);a.onmessage=function(i){t(i.data.buffer,i.data.view),u.revokeObjectURL(a.workerURL),a.terminate()},a.postMessage(i)}}!0===n.leftChannel&&(c=1),1===n.numberOfAudioChannels&&(c=1),(!c||c<1)&&(c=2),n.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+c),void 0===n.checkForInactiveTracks&&(n.checkForInactiveTracks=!0),this.record=function(){if(!1===h())throw"Please make sure MediaStream is active.";y(),R=w=!1,d=!0,void 0!==n.timeSlice&&A()},this.stop=function(i){i=i||function(){},d=!1,p({desiredSampRate:l,sampleRate:b,numberOfAudioChannels:c,internalInterleavedLength:s,leftBuffers:r,rightBuffers:1===c?[]:a,noWorker:n.noWorker},(function(t,n){e.blob=new Blob([n],{type:"audio/wav"}),e.buffer=new ArrayBuffer(n.buffer.byteLength),e.view=n,e.sampleRate=l||b,e.bufferSize=v,e.length=s,R=!1,i&&i(e.blob)}))},void 0===t.Storage&&(t.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),t.Storage.AudioContextConstructor&&"closed"!==t.Storage.AudioContextConstructor.state||(t.Storage.AudioContextConstructor=new t.Storage.AudioContext);var f=t.Storage.AudioContextConstructor,g=f.createMediaStreamSource(i),m=[0,256,512,1024,2048,4096,8192,16384],v=void 0===n.bufferSize?4096:n.bufferSize;if(-1===m.indexOf(v)&&(n.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(m,null,"\t"))),f.createJavaScriptNode)o=f.createJavaScriptNode(v,c,c);else{if(!f.createScriptProcessor)throw"WebAudio API has no support on this browser.";o=f.createScriptProcessor(v,c,c)}g.connect(o),n.bufferSize||(v=o.bufferSize);var b=void 0!==n.sampleRate?n.sampleRate:f.sampleRate||44100;(b<22050||b>96e3)&&(n.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),n.disableLogs||n.desiredSampRate&&console.log("Desired sample-rate: "+n.desiredSampRate);var w=!1;function y(){a=[],s=0,R=!1,d=!1,w=!1,f=null,e.leftchannel=r=[],e.rightchannel=a,e.numberOfAudioChannels=c,e.desiredSampRate=l,e.sampleRate=b,e.recordingLength=s,M={left:[],right:[],recordingLength:0}}function k(){o&&(o.onaudioprocess=null,o.disconnect(),o=null),g&&(g.disconnect(),g=null),y()}this.pause=function(){w=!0},this.resume=function(){if(!1===h())throw"Please make sure MediaStream is active.";if(!d)return n.disableLogs||console.log("Seems recording has been restarted."),void this.record();w=!1},this.clearRecordedData=function(){n.checkForInactiveTracks=!1,d&&this.stop(k),k()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var R=!1;o.onaudioprocess=function(i){if(!w)if(!1===h()&&(n.disableLogs||console.log("MediaStream seems stopped."),o.disconnect(),d=!1),d){R||(R=!0,n.onAudioProcessStarted&&n.onAudioProcessStarted(),n.initCallback&&n.initCallback());var t=i.inputBuffer.getChannelData(0),u=new Float32Array(t);if(r.push(u),2===c){var l=i.inputBuffer.getChannelData(1),p=new Float32Array(l);a.push(p)}e.recordingLength=s+=v,void 0!==n.timeSlice&&(M.recordingLength+=v,M.left.push(u),2===c&&M.right.push(p))}else g&&(g.disconnect(),g=null)},o.connect(f.createMediaStreamDestination?f.createMediaStreamDestination():f.destination),this.leftchannel=r,this.rightchannel=a,this.numberOfAudioChannels=c,this.desiredSampRate=l,this.sampleRate=b,e.recordingLength=s;var M={left:[],right:[],recordingLength:0};function A(){d&&"function"==typeof n.ondataavailable&&void 0!==n.timeSlice&&(M.left.length?(p({desiredSampRate:l,sampleRate:b,numberOfAudioChannels:c,internalInterleavedLength:M.recordingLength,leftBuffers:M.left,rightBuffers:1===c?[]:M.right},(function(i,t){var o=new Blob([t],{type:"audio/wav"});n.ondataavailable(o),setTimeout(A,n.timeSlice)})),M={left:[],right:[],recordingLength:0}):setTimeout(A,n.timeSlice))}}
/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */
function C(i,t){if("undefined"==typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var n=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(i){i in document.createElement("canvas")&&(n=!0)}));var o,e,r,a=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),d=50,s=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(a&&s&&s[2]&&(d=parseInt(s[2],10)),a&&d<52&&(n=!1),t.useWhammyRecorder&&(n=!1),n)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),i instanceof HTMLCanvasElement)o=i;else{if(!(i instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";o=i.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(r=!0,n&&!t.useWhammyRecorder){var i;"captureStream"in o?i=o.captureStream(25):"mozCaptureStream"in o?i=o.mozCaptureStream(25):"webkitCaptureStream"in o&&(i=o.webkitCaptureStream(25));try{var a=new m;a.addTrack(x(i,"video")[0]),i=a}catch(d){}if(!i)throw"captureStream API are NOT available.";(e=new M(i,{mimeType:t.mimeType||"video/webm"})).record()}else p.frames=[],h=(new Date).getTime(),l();t.initCallback&&t.initCallback()},this.getWebPImages=function(n){if("canvas"===i.nodeName.toLowerCase()){var o=p.frames.length;p.frames.forEach((function(i,n){var e=o-n;t.disableLogs||console.log(e+"/"+o+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(e,o);var r=i.image.toDataURL("image/webp",1);p.frames[n].image=r})),t.disableLogs||console.log("Generating WebM"),n()}else n()},this.stop=function(i){r=!1;var o=this;n&&e?e.stop(i):this.getWebPImages((function(){p.compile((function(n){t.disableLogs||console.log("Recording finished!"),o.blob=n,o.blob.forEach&&(o.blob=new Blob([],{type:"video/webm"})),i&&i(o.blob),p.frames=[]}))}))};var c=!1;function u(){p.frames=[],r=!1,c=!1}function l(){if(c)return h=(new Date).getTime(),setTimeout(l,500);if("canvas"===i.nodeName.toLowerCase()){var n=(new Date).getTime()-h;return h=(new Date).getTime(),p.frames.push({image:(o=document.createElement("canvas"),e=o.getContext("2d"),o.width=i.width,o.height=i.height,e.drawImage(i,0,0),o),duration:n}),void(r&&setTimeout(l,t.frameInterval))}var o,e;html2canvas(i,{grabMouse:void 0===t.showMousePointer||t.showMousePointer,onrendered:function(i){var n=(new Date).getTime()-h;if(!n)return setTimeout(l,t.frameInterval);h=(new Date).getTime(),p.frames.push({image:i.toDataURL("image/webp",1),duration:n}),r&&setTimeout(l,t.frameInterval)}})}this.pause=function(){c=!0,e instanceof M&&e.pause()},this.resume=function(){c=!1,e instanceof M?e.resume():r||this.record()},this.clearRecordedData=function(){r&&this.stop(u),u()},this.name="CanvasRecorder",this.toString=function(){return this.name};var h=(new Date).getTime(),p=new S.Video(100)}
/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */
function T(i,t){function n(i){i=void 0!==i?i:10;var t=(new Date).getTime()-d;return t?e?(d=(new Date).getTime(),setTimeout(n,100)):(d=(new Date).getTime(),a.paused&&a.play(),u.drawImage(a,0,0,c.width,c.height),s.frames.push({duration:t,image:c.toDataURL("image/webp")}),void(o||setTimeout(n,i,i))):setTimeout(n,i,i)}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),c.width=t.canvas.width||320,c.height=t.canvas.height||240,u=c.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(a=t.video.cloneNode(),t.initCallback&&t.initCallback()):(a=document.createElement("video"),y(i,a),a.onloadedmetadata=function(){t.initCallback&&t.initCallback()},a.width=t.video.width,a.height=t.video.height),a.muted=!0,a.play(),d=(new Date).getTime(),s=new S.Video,t.disableLogs||(console.log("canvas resolutions",c.width,"*",c.height),console.log("video width/height",a.width||c.width,"*",a.height||c.height)),n(t.frameInterval)};var o=!1;this.stop=function(i){i=i||function(){},o=!0;var n=this;setTimeout((function(){!function(i,t,n,o,e){var r=document.createElement("canvas");r.width=c.width,r.height=c.height;var a,d,s,u=r.getContext("2d"),l=[],h=-1===t,p=t&&t>0&&t<=i.length?t:i.length,f=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),g=n&&n>=0&&n<=1?n:0,m=o&&o>=0&&o<=1?o:0,v=!1;d=-1,s=(a={length:p,functionToLoop:function(t,n){var o,e,r,a=function(){!v&&r-o<=r*m||(h&&(v=!0),l.push(i[n])),t()};if(v)a();else{var d=new Image;d.onload=function(){u.drawImage(d,0,0,c.width,c.height);var i=u.getImageData(0,0,c.width,c.height);o=0,e=i.data.length,r=i.data.length/4;for(var t=0;t<e;t+=4){var n={r:i.data[t],g:i.data[t+1],b:i.data[t+2]};Math.sqrt(Math.pow(n.r-0,2)+Math.pow(n.g-0,2)+Math.pow(n.b-0,2))<=f*g&&o++}a()},d.src=i[n].image}},callback:function(){(l=l.concat(i.slice(p))).length<=0&&l.push(i[i.length-1]),e(l)}}).length,function i(){++d!==s?setTimeout((function(){a.functionToLoop(i,d)}),1):a.callback()}()}(s.frames,-1,null,null,(function(o){s.frames=o,t.advertisement&&t.advertisement.length&&(s.frames=t.advertisement.concat(s.frames)),s.compile((function(t){n.blob=t,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),i&&i(n.blob)}))}))}),10)};var e=!1;function r(){s.frames=[],o=!0,e=!1}this.pause=function(){e=!0},this.resume=function(){e=!1,o&&this.record()},this.clearRecordedData=function(){o||this.stop(r),r()},this.name="WhammyRecorder",this.toString=function(){return this.name};var a,d,s,c=document.createElement("canvas"),u=c.getContext("2d")}void 0!==c?k.AudioContext=c:"undefined"!=typeof webkitAudioContext&&(k.AudioContext=webkitAudioContext),void 0!==t&&(t.Storage=k),void 0!==t&&(t.MediaStreamRecorder=M),void 0!==t&&(t.StereoAudioRecorder=A),void 0!==t&&(t.CanvasRecorder=C),void 0!==t&&(t.WhammyRecorder=T);
/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */
var S=function(){function i(i){this.frames=[],this.duration=i||1,this.quality=.8}function t(i){function t(i,t,n){return[{data:i,id:231}].concat(n.map((function(i){var n=function(i){var t=0;if(i.keyframe&&(t|=128),i.invisible&&(t|=8),i.lacing&&(t|=i.lacing<<1),i.discardable&&(t|=1),i.trackNum>127)throw"TrackNumber > 127 not supported";return[128|i.trackNum,i.timecode>>8,255&i.timecode,t].map((function(i){return String.fromCharCode(i)})).join("")+i.frame}({discardable:0,frame:i.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=i.duration,{data:n,id:163}})))}function n(i){for(var t=[];i>0;)t.push(255&i),i>>=8;return new Uint8Array(t.reverse())}function o(i){var t=[];i=(i.length%8?new Array(9-i.length%8).join("0"):"")+i;for(var n=0;n<i.length;n+=8)t.push(parseInt(i.substr(n,8),2));return new Uint8Array(t)}function e(i,t){return parseInt(i.substr(t+4,4).split("").map((function(i){var t=i.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t})).join(""),2)}var r=new function(i){var e=function(i){if(i[0]){for(var t=i[0].width,n=i[0].height,o=i[0].duration,e=1;e<i.length;e++)o+=i[e].duration;return{duration:o,width:t,height:n}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}(i);if(!e)return[];for(var r,a=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(r=e.duration,[].slice.call(new Uint8Array(new Float64Array([r]).buffer),0).map((function(i){return String.fromCharCode(i)})).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:e.width,id:176},{data:e.height,id:186}]}]}]}]}],d=0,s=0;d<i.length;){var c=[],u=0;do{c.push(i[d]),u+=i[d].duration,d++}while(d<i.length&&u<3e4);var l={id:524531317,data:t(s,0,c)};a[1].data.push(l),s+=u}return function i(t){for(var e=[],r=0;r<t.length;r++){var a=t[r].data;"object"==typeof a&&(a=i(a)),"number"==typeof a&&(a=o(a.toString(2))),"string"==typeof a&&(a=new Uint8Array(a.split("").map((function(i){return i.charCodeAt(0)}))));var d=a.size||a.byteLength||a.length,s=Math.ceil(Math.ceil(Math.log(d)/Math.log(2))/8),c=d.toString(2),u=new Array(7*s+7+1-c.length).join("0")+c,l=new Array(s).join("0")+"1"+u;e.push(n(t[r].id)),e.push(o(l)),e.push(a)}return new Blob(e,{type:"video/webm"})}(a)}(i.map((function(i){var t=function(i){for(var t=i.RIFF[0].WEBP[0],n=t.indexOf("*"),o=0,e=[];o<4;o++)e[o]=t.charCodeAt(n+3+o);return{width:16383&(e[1]<<8|e[0]),height:16383&(e[3]<<8|e[2]),data:t,riff:i}}(function i(t){for(var n=0,o={};n<t.length;){var r=t.substr(n,4),a=e(t,n),d=t.substr(n+4+4,a);n+=8+a,o[r]=o[r]||[],o[r].push("RIFF"===r||"LIST"===r?i(d):d)}return o}(atob(i.image.slice(23))));return t.duration=i.duration,t})));postMessage(r)}return i.prototype.add=function(i,t){if("canvas"in i&&(i=i.canvas),"toDataURL"in i&&(i=i.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(i))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:i,duration:t||this.duration})},i.prototype.compile=function(i){var n,o,e,r=(n=t,o=u.createObjectURL(new Blob([n.toString(),"this.onmessage =  function (eee) {"+n.name+"(eee.data);}"],{type:"application/javascript"})),e=new Worker(o),u.revokeObjectURL(o),e);r.onmessage=function(t){t.data.error?console.error(t.data.error):i(t.data)},r.postMessage(this.frames)},{Video:i}}();void 0!==t&&(t.Whammy=S);
/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var B={init:function(){var i=this;if("undefined"!=typeof indexedDB&&void 0!==indexedDB.open){var t,n=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),o=indexedDB.open(n,1);o.onerror=i.onError,o.onsuccess=function(){(t=o.result).onerror=i.onError,t.setVersion&&1!==t.version?t.setVersion(1).onsuccess=function(){e(t),r()}:r()},o.onupgradeneeded=function(i){e(i.target.result)}}else console.error("IndexedDB API are not available in this browser.");function e(t){t.createObjectStore(i.dataStoreName)}function r(){var n=t.transaction([i.dataStoreName],"readwrite");function o(t){n.objectStore(i.dataStoreName).get(t).onsuccess=function(n){i.callback&&i.callback(n.target.result,t)}}i.videoBlob&&n.objectStore(i.dataStoreName).put(i.videoBlob,"videoBlob"),i.gifBlob&&n.objectStore(i.dataStoreName).put(i.gifBlob,"gifBlob"),i.audioBlob&&n.objectStore(i.dataStoreName).put(i.audioBlob,"audioBlob"),o("audioBlob"),o("videoBlob"),o("gifBlob")}},Fetch:function(i){return this.callback=i,this.init(),this},Store:function(i){return this.audioBlob=i.audioBlob,this.videoBlob=i.videoBlob,this.gifBlob=i.gifBlob,this.init(),this},onError:function(i){console.error(JSON.stringify(i,null,"\t"))},dataStoreName:"recordRTC",dbName:null};
/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */
function z(i,t){if("undefined"==typeof GIFEncoder){var n=document.createElement("script");n.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(n)}t=t||{};var o=i instanceof CanvasRenderingContext2D||i instanceof HTMLCanvasElement;this.record=function(){"undefined"!=typeof GIFEncoder&&c?(o||(t.width||(t.width=u.offsetWidth||320),t.height||(t.height=u.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),r.width=t.canvas.width||320,r.height=t.canvas.height||240,u.width=t.video.width||320,u.height=t.video.height||240),(h=new GIFEncoder).setRepeat(0),h.setDelay(t.frameRate||200),h.setQuality(t.quality||10),h.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),p=a((function i(n){if(!0!==f.clearedRecordedData){if(e)return setTimeout((function(){i(n)}),100);p=a(i),void 0===typeof l&&(l=n),n-l<90||(!o&&u.paused&&u.play(),o||d.drawImage(u,0,0,r.width,r.height),t.onGifPreview&&t.onGifPreview(r.toDataURL("image/png")),h.addFrame(d),l=n)}})),t.initCallback&&t.initCallback()):setTimeout(f.record,1e3)},this.stop=function(i){i=i||function(){},p&&s(p),this.blob=new Blob([new Uint8Array(h.stream().bin)],{type:"image/gif"}),i(this.blob),h.stream().bin=[]};var e=!1;this.pause=function(){e=!0},this.resume=function(){e=!1},this.clearRecordedData=function(){f.clearedRecordedData=!0,h&&(h.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var r=document.createElement("canvas"),d=r.getContext("2d");o&&(i instanceof CanvasRenderingContext2D?r=(d=i).canvas:i instanceof HTMLCanvasElement&&(d=i.getContext("2d"),r=i));var c=!0;if(!o){var u=document.createElement("video");u.muted=!0,u.autoplay=!0,u.playsInline=!0,c=!1,u.onloadedmetadata=function(){c=!0},y(i,u),u.play()}var l,h,p=null,f=this}function j(i,n){!function(i){void 0===t&&i&&"undefined"==typeof window&&void 0!==K&&(K.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},K.console||(K.console={}),void 0!==K.console.log&&void 0!==K.console.error||(K.console.error=K.console.log=K.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(i.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var i={getContext:function(){return i},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return i},i.HTMLVideoElement=function(){}),"undefined"==typeof location&&(i.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(i.screen={width:0,height:0}),void 0===c&&(i.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),i.window=K)}(void 0!==K?K:null),n=n||"multi-streams-mixer";var o=[],e=!1,r=document.createElement("canvas"),a=r.getContext("2d");r.style.opacity=0,r.style.position="absolute",r.style.zIndex=-1,r.style.top="-1000em",r.style.left="-1000em",r.className=n,(document.body||document.documentElement).appendChild(r),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var d=this,s=window.AudioContext;void 0===s&&("undefined"!=typeof webkitAudioContext&&(s=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(s=mozAudioContext));var c=window.URL;void 0===c&&"undefined"!=typeof webkitURL&&(c=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var u=window.MediaStream;void 0===u&&"undefined"!=typeof webkitMediaStream&&(u=webkitMediaStream),void 0!==u&&void 0===u.prototype.stop&&(u.prototype.stop=function(){this.getTracks().forEach((function(i){i.stop()}))});var l={};function h(){if(!e){var i=o.length,t=!1,n=[];if(o.forEach((function(i){i.stream||(i.stream={}),i.stream.fullcanvas?t=i:n.push(i)})),t)r.width=t.stream.width,r.height=t.stream.height;else if(n.length){r.width=i>1?2*n[0].width:n[0].width;var a=1;3!==i&&4!==i||(a=2),5!==i&&6!==i||(a=3),7!==i&&8!==i||(a=4),9!==i&&10!==i||(a=5),r.height=n[0].height*a}else r.width=d.width||360,r.height=d.height||240;t&&t instanceof HTMLVideoElement&&p(t),n.forEach((function(i,t){p(i,t)})),setTimeout(h,d.frameInterval)}}function p(i,t){if(!e){var n=0,o=0,r=i.width,d=i.height;1===t&&(n=i.width),2===t&&(o=i.height),3===t&&(n=i.width,o=i.height),4===t&&(o=2*i.height),5===t&&(n=i.width,o=2*i.height),6===t&&(o=3*i.height),7===t&&(n=i.width,o=3*i.height),void 0!==i.stream.left&&(n=i.stream.left),void 0!==i.stream.top&&(o=i.stream.top),void 0!==i.stream.width&&(r=i.stream.width),void 0!==i.stream.height&&(d=i.stream.height),a.drawImage(i,n,o,r,d),"function"==typeof i.stream.onRender&&i.stream.onRender(a,n,o,r,d,t)}}function f(i){var t=document.createElement("video");return function(i,t){"srcObject"in t?t.srcObject=i:"mozSrcObject"in t?t.mozSrcObject=i:t.srcObject=i}(i,t),t.className=n,t.muted=!0,t.volume=0,t.width=i.width||d.width||360,t.height=i.height||d.height||240,t.play(),t}function g(t){o=[],(t=t||i).forEach((function(i){if(i.getTracks().filter((function(i){return"video"===i.kind})).length){var t=f(i);t.stream=i,o.push(t)}}))}void 0!==s?l.AudioContext=s:"undefined"!=typeof webkitAudioContext&&(l.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){h()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var n=new u;if(t.getTracks().filter((function(i){return"video"===i.kind})).length){var e=f(t);e.stream=t,o.push(e),n.addTrack(t.getTracks().filter((function(i){return"video"===i.kind}))[0])}if(t.getTracks().filter((function(i){return"audio"===i.kind})).length){var r=d.audioContext.createMediaStreamSource(t);d.audioDestination=d.audioContext.createMediaStreamDestination(),r.connect(d.audioDestination),n.addTrack(d.audioDestination.stream.getTracks().filter((function(i){return"audio"===i.kind}))[0])}i.push(n)}))},this.releaseStreams=function(){o=[],e=!0,d.gainNode&&(d.gainNode.disconnect(),d.gainNode=null),d.audioSources.length&&(d.audioSources.forEach((function(i){i.disconnect()})),d.audioSources=[]),d.audioDestination&&(d.audioDestination.disconnect(),d.audioDestination=null),d.audioContext&&d.audioContext.close(),d.audioContext=null,a.clearRect(0,0,r.width,r.height),r.stream&&(r.stream.stop(),r.stream=null)},this.resetVideoStreams=function(i){!i||i instanceof Array||(i=[i]),g(i)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){e=!1;var t=function(){var i;g(),"captureStream"in r?i=r.captureStream():"mozCaptureStream"in r?i=r.mozCaptureStream():d.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new u;return i.getTracks().filter((function(i){return"video"===i.kind})).forEach((function(i){t.addTrack(i)})),r.stream=t,t}(),n=function(){l.AudioContextConstructor||(l.AudioContextConstructor=new l.AudioContext),d.audioContext=l.AudioContextConstructor,d.audioSources=[],!0===d.useGainNode&&(d.gainNode=d.audioContext.createGain(),d.gainNode.connect(d.audioContext.destination),d.gainNode.gain.value=0);var t=0;if(i.forEach((function(i){if(i.getTracks().filter((function(i){return"audio"===i.kind})).length){t++;var n=d.audioContext.createMediaStreamSource(i);!0===d.useGainNode&&n.connect(d.gainNode),d.audioSources.push(n)}})),t)return d.audioDestination=d.audioContext.createMediaStreamDestination(),d.audioSources.forEach((function(i){i.connect(d.audioDestination)})),d.audioDestination.stream}();return n&&n.getTracks().filter((function(i){return"audio"===i.kind})).forEach((function(i){t.addTrack(i)})),i.forEach((function(){})),t}}
/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */
function L(i,t){i=i||[];var n,o,e=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){var e;n=new j(i,t.elementClass||"multi-streams-mixer"),(e=[],i.forEach((function(i){x(i,"video").forEach((function(i){e.push(i)}))})),e).length&&(n.frameInterval=t.frameInterval||10,n.width=t.video.width||360,n.height=t.video.height||240,n.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(n.getMixedStream()),(o=new M(n.getMixedStream(),t)).record()},this.stop=function(i){o&&o.stop((function(t){e.blob=t,i(t),e.clearRecordedData()}))},this.pause=function(){o&&o.pause()},this.resume=function(){o&&o.resume()},this.clearRecordedData=function(){o&&(o.clearRecordedData(),o=null),n&&(n.releaseStreams(),n=null)},this.addStreams=function(e){if(!e)throw"First parameter is required.";e instanceof Array||(e=[e]),i.concat(e),o&&n&&(n.appendStreams(e),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(n.getMixedStream()))},this.resetVideoStreams=function(i){n&&(!i||i instanceof Array||(i=[i]),n.resetVideoStreams(i))},this.getMixer=function(){return n},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}
/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024}
 */
function F(i,t){function n(){return new ReadableStream({start:function(n){var o=document.createElement("canvas"),e=document.createElement("video");e.srcObject=i,e.onplaying=function(){o.width=t.width,o.height=t.height;var i=o.getContext("2d"),r=1e3/t.frameRate;setTimeout((function o(){i.drawImage(e,0,0),n.enqueue(i.getImageData(0,0,t.width,t.height)),setTimeout(o,r)}),r)},e.play()}})}var o,e;"undefined"!=typeof ReadableStream&&"undefined"!=typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,this.record=function(){r=[],e=!1,this.blob=null,function i(a,d){if(t.workerPath||d){if(!t.workerPath&&d instanceof ArrayBuffer){var s=new Blob([d],{type:"text/javascript"});t.workerPath=u.createObjectURL(s)}t.workerPath||console.error("workerPath parameter is missing."),(o=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),o.addEventListener("message",(function(i){"READY"===i.data?(o.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:!0}),n().pipeTo(new WritableStream({write:function(i){o&&o.postMessage(i.data.buffer,[i.data.buffer])}}))):i.data&&(e||r.push(i.data))}))}else fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(t){t.arrayBuffer().then((function(t){i(a,t)}))}))}(i),"function"==typeof t.initCallback&&t.initCallback()},this.pause=function(){e=!0},this.resume=function(){e=!1};var r=[];this.stop=function(i){o&&(o.postMessage(null),o.terminate(),o=null),this.blob=new Blob(r,{type:"video/webm"}),i(this.blob)},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){r=[],e=!1,this.blob=null},this.blob=null}void 0!==t&&(t.DiskStorage=B),void 0!==t&&(t.GifRecorder=z),void 0===t&&(i.exports=j),void 0!==t&&(t.MultiStreamRecorder=L),void 0!==t&&(t.RecordRTCPromisesHandler=
/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */
function(i,n){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===i)throw'First argument "MediaStream" is required.';var o=this;o.recordRTC=new t(i,n),this.startRecording=function(){return new Promise((function(i,t){try{o.recordRTC.startRecording(),i()}catch(n){t(n)}}))},this.stopRecording=function(){return new Promise((function(i,t){try{o.recordRTC.stopRecording((function(n){o.blob=o.recordRTC.getBlob(),o.blob&&o.blob.size?i(n):t("Empty blob.",o.blob)}))}catch(n){t(n)}}))},this.pauseRecording=function(){return new Promise((function(i,t){try{o.recordRTC.pauseRecording(),i()}catch(n){t(n)}}))},this.resumeRecording=function(){return new Promise((function(i,t){try{o.recordRTC.resumeRecording(),i()}catch(n){t(n)}}))},this.getDataURL=function(){return new Promise((function(i,t){try{o.recordRTC.getDataURL((function(t){i(t)}))}catch(n){t(n)}}))},this.getBlob=function(){return new Promise((function(i,t){try{i(o.recordRTC.getBlob())}catch(n){t(n)}}))},this.getInternalRecorder=function(){return new Promise((function(i,t){try{i(o.recordRTC.getInternalRecorder())}catch(n){t(n)}}))},this.reset=function(){return new Promise((function(i,t){try{i(o.recordRTC.reset())}catch(n){t(n)}}))},this.destroy=function(){return new Promise((function(i,t){try{i(o.recordRTC.destroy())}catch(n){t(n)}}))},this.getState=function(){return new Promise((function(i,t){try{i(o.recordRTC.getState())}catch(n){t(n)}}))},this.blob=null,this.version="5.5.9"}),void 0!==t&&(t.WebAssemblyRecorder=F)}(V={exports:{}}),V.exports);const{RecordRTCPromisesHandler:Y,StereoAudioRecorder:J,MediaStreamRecorder:X}=Z,Q=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveOrOpenBlob&&!navigator.msSaveBlob),ii=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),ti=class{constructor(t){i(this,t),this.startX=0,this.startY=0,this.lastX=0,this.lastY=0,this.lastTransform="translate(0, 0)",this.isRecording=!1,this.pressed=!1,this.activated=!1,this.disabled=!1,this.routerDirection="forward",this.show=!1,this.translucent=!1,this.type="button",this.maxThreshold=10,this.iconName="mic",this.scaleX=1.5,this.scaleY=1.5,this.width=56,this.height=56,this.maxWidth=100,this.duration=400,this.enableLogs=!1,this.enableRecording=!0,this.autoPlay=!1,this.onSwipeEnd=()=>{const i=Math.abs(this.lastX)>this.maxThreshold;this.pressed=!1,this.onStop(i),this.onAnimatePressUp(),this.lastX=0,this.lastY=0;const t=this.lastTransform,n=`translate(${this.lastX}px, ${this.lastY}px)`;this.lastTransform=n;const o=x();o.addElement(this.recordButton).fromTo("transform",t,n).fromTo("webkitTransform",t,n).onFinish(()=>this.recordButton.style.removeProperty("transform"));const e=x();e.addElement(this.el).from("width",this.el.style.width).to("width",this.width+"px").onFinish(()=>this.el.style.width=this.width+"px");const r=x();r.easing("ease-in-out").duration(this.duration).addAnimation(o).addAnimation(e).onFinish(()=>{r.destroy()}).play()},this.onSwipeStart=()=>{this.pressed=!1,this.onSwipe(0,0)},this.onStart=async()=>{if(!this.isRecording){if(this.isRecording=!0,!this.enableRecording)return this.startRecording.emit();try{this.stream=await this.captureMicrophone(),this.recordAudio.muted=!0,this.recordAudio.srcObject=this.stream;const i={type:"audio",recorderType:ii||Q?J:X,disableLogs:!this.enableLogs,sampleRate:this.sampleRate||(ii?44100:96e3),desiredSampRate:this.desiredSampRate||16e3,bufferSize:this.bufferSize||(ii?4096:16384),numberOfAudioChannels:this.numberOfAudioChannels||(Q?1:2)};this.mimeType&&(i.mimeType=this.mimeType),this.timeSlice&&(i.timeSlice=this.timeSlice),this.audioBitsPerSecond&&(i.audioBitsPerSecond=this.audioBitsPerSecond),this.recorder=new Y(this.stream,i),await this.recorder.startRecording(),this.startRecording.emit()}catch(i){this.errorRecording.emit(i),this.isRecording=!1}}},this.onStop=async(i=!1)=>{if(this.isRecording){if(!this.enableRecording)return i?this.cancelRecording.emit():this.stopRecording.emit(),void(this.isRecording=!1);if(this.recorder)try{if(await this.recorder.stopRecording(),i)this.cancelRecording.emit();else{const i=await this.recorder.getBlob();if(this.stopRecording.emit(i),i&&this.autoPlay){const t=URL.createObjectURL(i);t&&(this.playAudio.src=t),this.playAudio.muted=!1,this.playAudio.play()}}this.recorder.destroy(),this.recorder=null,this.stream&&(this.stream.stop&&this.stream.stop(),this.stream=null)}catch(t){this.errorRecording.emit(t)}finally{this.isRecording=!1}}},this.onAnimatePress=()=>{this.pressed=!0,this.pressTimerId=setTimeout(()=>{this.pressed&&this.onStart()},251);const i=`scale(${this.scaleX}, ${this.scaleY})`;this.contentAnimation.stop(),this.contentAnimation.fromTo("transform","scale(1, 1)",i).fromTo("webkitTransform","scale(1, 1)",i).duration(this.duration).play()},this.onAnimatePressUp=async()=>{clearTimeout(this.pressTimerId),this.pressed&&(this.onStop(),this.pressed=!1);const i=`scale(${this.scaleX}, ${this.scaleY})`;this.contentAnimation.stop(),this.contentAnimation.fromTo("transform",i,"scale(1, 1)").fromTo("webkitTransform",i,"scale(1, 1)").duration(this.duration).play()},this.startRecording=r(this,"startRecording",7),this.stopRecording=r(this,"stopRecording",7),this.cancelRecording=r(this,"cancelRecording",7),this.errorRecording=r(this,"errorRecording",7)}componentDidLoad(){this.recordButton=this.el.querySelector("#recordButton"),this.recordAudio=this.el.querySelector("#recordAudio"),this.playAudio=this.el.querySelector("#playAudio"),this.swipeGesture=y({el:this.recordButton,gestureName:"button-swipe",gesturePriority:100,threshold:this.maxThreshold,direction:"x",onStart:this.onSwipeStart,onMove:i=>i.deltaX<0&&this.onSwipe(i.deltaX,0),onEnd:this.onSwipeEnd}),this.swipeGesture.enable(!0),this.contentAnimation=x().addElement(this.el),this.el.style.width=this.width+"px",this.el.style.height=this.height+"px"}componentWillUpdate(){this.el.style.width=this.width+"px",this.el.style.height=this.height+"px"}componentDidUnload(){this.swipeGesture&&(this.swipeGesture.destroy(),this.swipeGesture=void 0),this.contentAnimation&&(this.contentAnimation.destroy(),this.contentAnimation=null)}onSwipe(i,t){const n=this.startX-i,o=this.startY+t;this.lastX=n<0?0:n>this.maxWidth?this.maxWidth:n,this.lastY=o<0?0:o;const e=`translate(-${this.lastX}px, ${this.lastY}px)`;this.lastTransform=e,this.recordButton.style.webkitTransform=e,this.recordButton.style.transform=e,this.el.style.width=this.lastX+this.width*this.scaleX+"px"}async captureMicrophone(){const i={audio:!!Q||{echoCancellation:!1}};return new Promise((function(t,n){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(i).then(i=>t(i)).catch(i=>n(i)):(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)(i,i=>t(i),i=>n(i))}))}render(){return t(n,null,t("audio",{id:"recordAudio"}),t("audio",{id:"playAudio"}),t("ion-fab-button",{id:"recordButton",color:this.color,activated:this.activated,disabled:this.disabled,download:this.download,href:this.href,rel:this.rel,routerDirection:this.routerDirection,target:this.target,show:this.show,translucent:this.translucent,type:this.type,size:this.size,onMouseDown:this.onAnimatePress,onMouseUp:this.onAnimatePressUp,onTouchStart:this.onAnimatePress,onTouchEnd:this.onAnimatePressUp,onTouchCancel:this.onAnimatePressUp,style:this.buttonStyle,class:this.buttonClass},t("ion-icon",{ariaLabel:this.iconAriaLabel,ios:this.iconiOS,md:this.iconMd,src:this.iconSrc,name:this.iconName,size:this.iconSize,style:this.iconStyle,class:this.iconClass})))}get el(){return o(this)}};ti.style=":root{--ion-color-step-600:white}:host{display:block}:host audio{display:none}record-audio-button{display:block;position:relative;z-index:2}record-audio-button ion-fab-button{position:absolute;right:0;z-index:1}";export{k as ion_app,z as ion_col,j as ion_fab_button,L as ion_footer,F as ion_grid,U as ion_icon,E as ion_ripple_effect,N as ion_row,$ as ion_textarea,ti as record_audio_button}